generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

/* Begin od better-auth schema.prisma

model User {
  id            String    @id
  name          String
  email         String
  emailVerified Boolean   @default(false)
  image         String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  sessions      Session[]
  accounts      Account[]

  @@unique([email])
  @@map("user")
}

model Session {
  id        String   @id
  expiresAt DateTime
  token     String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  ipAddress String?
  userAgent String?
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([token])
  @@index([userId])
  @@map("session")
}

model Account {
  id                    String    @id
  accountId             String
  providerId            String
  userId                String
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  @@index([userId])
  @@map("account")
}

model Verification {
  id         String   @id
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@index([identifier])
  @@map("verification")
}

End of better-auth schema.prisma */

model category {
  category_id                      Int      @id @default(autoincrement())
  category_name                    String   @unique @db.VarChar
  ticket_ticket_categoryTocategory ticket[] @relation("ticket_categoryTocategory")
}

model description {
  description_id                         Int      @id @default(autoincrement())
  description                            String
  ticket_ticket_descriptionTodescription ticket[] @relation("ticket_descriptionTodescription")
}

model floor {
  floor_id               Int    @id @default(autoincrement())
  floor_name             String @db.VarChar(255)
  room_room_floorTofloor room[] @relation("room_floorTofloor")
}

model priority {
  priority_id                      Int      @id @default(autoincrement())
  priority_type                    String   @unique @db.VarChar(255)
  ticket_ticket_priorityTopriority ticket[] @relation("ticket_priorityTopriority")
}

model role {
  role_id                Int     @id @default(autoincrement())
  role_name              String  @db.VarChar(255)
  users_users_roleTorole users[] @relation("users_roleTorole")
}

model room {
  room_id                             Int       @id @default(autoincrement())
  name                                String    @unique @db.VarChar
  floor                               Int
  room_type                           Int
  floor_room_floorTofloor             floor     @relation("room_floorTofloor", fields: [floor], references: [floor_id], onDelete: NoAction, onUpdate: NoAction)
  room_type_room_room_typeToroom_type room_type @relation("room_room_typeToroom_type", fields: [room_type], references: [room_type_id], onDelete: NoAction, onUpdate: NoAction)
  ticket_ticket_roomToroom            ticket[]  @relation("ticket_roomToroom")
}

model room_type {
  room_type_id                   Int    @id @default(autoincrement())
  room_type_name                 String @db.VarChar(255)
  room_room_room_typeToroom_type room[] @relation("room_room_typeToroom_type")
}

model status {
  status_id                    Int      @id @default(autoincrement())
  status_name                  String   @unique @db.VarChar(255)
  ticket_ticket_statusTostatus ticket[] @relation("ticket_statusTostatus")
}

model ticket {
  ticket_id                                                     Int                @id @default(autoincrement())
  reported_user                                                 Int
  ticket_title                                                  String             @db.VarChar(255)
  room                                                          Int
  category                                                      Int
  description                                                   Int
  priority                                                      Int
  status                                                        Int                @default(1)
  created_time                                                  DateTime           @default(now()) @db.Timestamptz(6)
  updated_status                                                DateTime?          @db.Timestamp(6)
  solved_at                                                     DateTime?          @db.Timestamp(6)
  ticket_attachment                                             Int?
  processing_user                                               Int?
  category_ticket_categoryTocategory                            category           @relation("ticket_categoryTocategory", fields: [category], references: [category_id], onDelete: NoAction, onUpdate: NoAction)
  description_ticket_descriptionTodescription                   description        @relation("ticket_descriptionTodescription", fields: [description], references: [description_id], onDelete: NoAction, onUpdate: NoAction)
  priority_ticket_priorityTopriority                            priority           @relation("ticket_priorityTopriority", fields: [priority], references: [priority_id], onDelete: NoAction, onUpdate: NoAction)
  users_ticket_processing_userTousers                           users?             @relation("ticket_processing_userTousers", fields: [processing_user], references: [user_id], onDelete: NoAction, onUpdate: NoAction)
  users_ticket_reported_userTousers                             users              @relation("ticket_reported_userTousers", fields: [reported_user], references: [user_id], onDelete: NoAction, onUpdate: NoAction)
  room_ticket_roomToroom                                        room               @relation("ticket_roomToroom", fields: [room], references: [room_id], onDelete: NoAction, onUpdate: NoAction)
  status_ticket_statusTostatus                                  status             @relation("ticket_statusTostatus", fields: [status], references: [status_id], onDelete: NoAction, onUpdate: NoAction)
  ticket_attachment_ticket_ticket_attachmentToticket_attachment ticket_attachment? @relation("ticket_ticket_attachmentToticket_attachment", fields: [ticket_attachment], references: [attachment_id], onDelete: NoAction, onUpdate: NoAction)
}

model ticket_attachment {
  attachment_id                                      Int      @id @default(autoincrement())
  url                                                String
  uploaded_by                                        Int?
  ticket_ticket_ticket_attachmentToticket_attachment ticket[] @relation("ticket_ticket_attachmentToticket_attachment")
  users                                              users?   @relation(fields: [uploaded_by], references: [user_id], onDelete: NoAction, onUpdate: NoAction)
}

model users {
  user_id                              Int                 @id @default(autoincrement())
  name                                 String              @db.VarChar(255)
  surname                              String              @db.VarChar(255)
  username                             String              @unique @db.VarChar(255)
  email                                String              @unique
  phone_number                         String?             @db.VarChar
  hashed_password                      String
  role                                 Int?                @default(3)
  ticket_ticket_processing_userTousers ticket[]            @relation("ticket_processing_userTousers")
  ticket_ticket_reported_userTousers   ticket[]            @relation("ticket_reported_userTousers")
  ticket_attachment                    ticket_attachment[]
  role_users_roleTorole                role?               @relation("users_roleTorole", fields: [role], references: [role_id], onDelete: NoAction, onUpdate: NoAction)
}
